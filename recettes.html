<!DOCTYPE html>
<html lang="fr">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>Recettes - Cuisine Saine Sans Gluten et Sans Lactose</title>
Â  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
Â  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Montserrat:wght@300;400&family=Sawarabi+Mincho&display=swap" rel="stylesheet">
Â  <style>
Â  Â  /* Styles gÃ©nÃ©raux */
Â  Â  html { scroll-behavior: smooth; }
Â  Â  body { font-family: 'Montserrat', sans-serif; background-color: #F0EDE5; color: #4A4A4A; margin: 0; padding: 0; background-image: linear-gradient(rgba(255,255,255,0.3), rgba(255,255,255,0.3)), url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"%3E%3Cpath fill="%236B3A1E" fill-opacity="0.05" d="M11.5 0L0 11.5V100h100V0z"/%3E%3C/svg%3E'); }
Â  Â  
Â  Â  /* Typographie Ã©lÃ©gante */
Â  Â  h1, h3, h4 { font-family: 'Dancing Script', cursive; color: #6B3A1E; line-height: 1.2; margin: 0; padding: 10px 0; }
Â  Â  h2 { font-family: 'Dancing Script', cursive; font-size: 1.6em; line-height: 2.0; letter-spacing: 0.1em; font-style: normal; font-weight: 700; color: #000000; margin: 0; text-transform: uppercase; padding: 15px 0; }
Â  Â  
Â  Â  /* Navigation et en-tÃªte */
Â  Â  .navbar { background-color: #8B4513 !important; padding: 10px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
Â  Â  .navbar-brand, .nav-link { color: #F0EDE5 !important; font-weight: 300; }
Â  Â  .nav-link:hover { color: #D4B483 !important; }
Â  Â  header { background: linear-gradient(to bottom, #8B4513, #F0EDE5); text-align: center; padding: 30px 0; margin: 0; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
Â  Â  
Â  Â  /* Contenu principal */
Â  Â  main { padding: 20px 0; }
Â  Â  .introduction, .conclusion { text-align: center; padding: 20px; font-style: italic; color: #6B3A1E; }
Â  Â  
Â  Â  /* Cartes de recettes/catÃ©gories (AmÃ©lioration du look) */
Â  Â  .card { 
Â  Â  Â  transition: transform 0.3s ease, box-shadow 0.3s ease; 
Â  Â  Â  border: none; /* Supprimer la bordure par dÃ©faut de Bootstrap */
Â  Â  Â  border-radius: 10px;
Â  Â  Â  overflow: hidden;
Â  Â  }
Â  Â  .card:hover { 
Â  Â  Â  transform: translateY(-5px); /* LÃ©gÃ¨re Ã©lÃ©vation */
Â  Â  Â  box-shadow: 0 10px 20px rgba(0,0,0,0.15); /* Ombre plus marquÃ©e */
Â  Â  }
Â  Â  .card-img-top { height: 200px; object-fit: cover; }
Â  Â  .row { gap: 20px 0; padding: 0 10px; margin: 0; }
Â  Â  
Â  Â  /* Affichage d'une seule recette */
Â  Â  #recipe-content { max-width: 800px; margin: 20px auto; padding: 30px; background-color: rgba(255,255,255,0.95); border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
Â  Â  
Â  Â  /* Boutons bruns Ã©lÃ©gants */
Â  Â  .btn-brown { 
Â  Â  Â  background-color: #6B3A1E; 
Â  Â  Â  color: #F0EDE5; 
Â  Â  Â  border: none; 
Â  Â  Â  padding: 10px 20px; 
Â  Â  Â  border-radius: 5px; 
Â  Â  Â  cursor: pointer; 
Â  Â  Â  transition: background-color 0.3s, transform 0.1s; 
Â  Â  Â  margin: 10px 5px; 
Â  Â  }
Â  Â  .btn-brown:hover { 
Â  Â  Â  background-color: #8B4513; 
Â  Â  Â  color: #FFF; 
Â  Â  Â  transform: translateY(-1px);
Â  Â  }
Â  Â  .back-button { text-align: center; padding: 20px 0; }
Â  Â  
Â  Â  /* Messages d'Ã©tat */
Â  Â  .error-message { background: #ffebee; border: 2px solid #ef5350; padding: 20px; margin: 20px auto; border-radius: 10px; text-align: center; color: #c62828; max-width: 600px; }
Â  Â  .loading { text-align: center; padding: 40px; font-size: 1.2em; color: #6B3A1E; }
Â  </style>
</head>
<body>

Â  <nav class="navbar navbar-expand-lg">
Â  Â  <div class="container-fluid">
Â  Â  Â  <a class="navbar-brand" href="index.html">Cuisine Saine Sans Gluten et Sans Lactose</a>
Â  Â  Â  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
Â  Â  Â  Â  <span class="navbar-toggler-icon"></span>
Â  Â  Â  </button>
Â  Â  Â  <div class="collapse navbar-collapse" id="navbarNav">
Â  Â  Â  Â  <ul class="navbar-nav ms-auto">
Â  Â  Â  Â  Â  <li class="nav-item"><a class="nav-link" href="index.html">Accueil</a></li>
Â  Â  Â  Â  Â  <li class="nav-item"><a class="nav-link" href="recettes.html">Recettes</a></li>
Â  Â  Â  Â  Â  <li class="nav-item"><a class="nav-link" href="fodmap.html">MÃ©thode FODMAP</a></li>
Â  Â  Â  Â  Â  <li class="nav-item"><a class="nav-link" href="achats.html">Achats</a></li>
Â  Â  Â  Â  Â  <li class="nav-item"><a class="nav-link" href="questions.html">Questions/Commentaires</a></li>
Â  Â  Â  Â  </ul>
Â  Â  Â  </div>
Â  Â  </div>
Â  </nav>

Â  <header>
Â  Â  <h1>Nos Recettes</h1>
Â  Â  <p>Sans gluten, sans lactose & sans viande rouge</p>
Â  </header>

Â  <main class="container-fluid">
Â  Â  <section class="introduction">
Â  Â  Â  <p>Une collection simple de recettes riches en nutriments, faciles Ã  prÃ©parer et adaptÃ©es aux repas quotidiens pour allier plaisir, gourmandise et santÃ©.</p>
Â  Â  </section>

Â  Â  Â  Â  <div id="loading" class="loading">Chargement des recettes...</div>

Â  Â  Â  Â  <div id="error-message" class="error-message" style="display: none;">
Â  Â  Â  <h3>âš ï¸ Erreur de chargement</h3>
Â  Â  Â  <p id="error-text">Impossible de charger le fichier de recettes. Veuillez vÃ©rifier son nom **(recettes.json)** et sa structure (doit contenir une clÃ© `recipes` ou `themes`).</p>
Â  Â  </div>

Â  Â  Â  Â  <section id="categories-container" class="row row-cols-1 row-cols-md-2 g-4"></section>

Â  Â  Â  Â  <section id="recipes-container" style="display: none;"></section>

Â  Â  Â  Â  <section id="recipe-content" style="display: none;"></section>

Â  Â  <section class="conclusion">
Â  Â  Â  <p>Ces recettes dÃ©montrent qu'une cuisine saine peut Ãªtre Ã©lÃ©gante et gourmande. RÃ©galez-vous !</p>
Â  Â  </section>
Â  </main>

Â  <footer style="text-align: center; padding: 20px; background-color: #8B4513; color: #F0EDE5;">
Â  Â  <p>&copy; 2023. Avec amour pour votre bien-Ãªtre.</p>
Â  </footer>

Â  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
Â  <script>
Â  Â  // Variables globales
Â  Â  let groupedRecipes = {}; // Stocke les recettes regroupÃ©es par catÃ©gorie
Â  Â  let categoryKeys = []; // Ordre des catÃ©gories
Â  Â  
Â  Â  const catContainer = document.getElementById('categories-container');
Â  Â  const recContainer = document.getElementById('recipes-container');
Â  Â  const recipeDiv = document.getElementById('recipe-content');
Â  Â  const RECIPE_FILE = 'recettes.json'; // ğŸš© NOM DE FICHIER CORRIGÃ‰ ğŸš©

Â  Â  // Fonction principale de regroupement des donnÃ©es
Â  Â  function processData(data) {
Â  Â  Â  let recipes = [];

Â  Â  Â  // Logique pour supporter les deux structures de fichier JSON fournies prÃ©cÃ©demment
Â  Â  Â  if (data.themes) {
Â  Â  Â  Â  // Structure 2 : { themes: [{ theme: '...', recettes: [...] }] }
Â  Â  Â  Â  data.themes.forEach(themeObj => {
Â  Â  Â  Â  Â  themeObj.recettes.forEach(recipe => {
Â  Â  Â  Â  Â  Â  // Normalisation des clÃ©s pour la compatibilitÃ©
Â  Â  Â  Â  Â  Â  recipes.push({ 
Â  Â  Â  Â  Â  Â  Â  category: themeObj.theme, // Utilise 'theme' comme 'category'
Â  Â  Â  Â  Â  Â  Â  title: recipe.titre, // Utilise 'titre' comme 'title'
Â  Â  Â  Â  Â  Â  Â  ingredients: recipe.ingredients,
Â  Â  Â  Â  Â  Â  Â  preparation: recipe.preparation
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  Â  } else if (data.recipes) {
Â  Â  Â  Â  // Structure 1 (Originale) : { recipes: [{ category: '...', title: '...', ... }] }
Â  Â  Â  Â  recipes = data.recipes;
Â  Â  Â  } else {
Â  Â  Â  Â  throw new Error("Structure JSON invalide. Manque les clÃ©s 'recipes' ou 'themes'.");
Â  Â  Â  }

Â  Â  Â  // Regrouper les recettes normalisÃ©es par catÃ©gorie
Â  Â  Â  groupedRecipes = recipes.reduce((acc, recipe) => {
Â  Â  Â  Â  const category = recipe.category;
Â  Â  Â  Â  if (!acc[category]) {
Â  Â  Â  Â  Â  acc[category] = [];
Â  Â  Â  Â  }
Â  Â  Â  Â  acc[category].push(recipe);
Â  Â  Â  Â  return acc;
Â  Â  Â  }, {});

Â  Â  Â  // Trier les catÃ©gories par ordre alphabÃ©tique
Â  Â  Â  categoryKeys = Object.keys(groupedRecipes).sort((a, b) => a.localeCompare(b, 'fr'));
Â  Â  Â  
Â  Â  Â  if (categoryKeys.length === 0) {
Â  Â  Â  Â  throw new Error("Aucune recette trouvÃ©e aprÃ¨s le traitement des donnÃ©es.");
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  showCategories();
Â  Â  }


Â  Â  // Charger le fichier JSON au chargement de la page
Â  Â  document.addEventListener("DOMContentLoaded", () => {
Â  Â  Â  fetch(RECIPE_FILE)
Â  Â  Â  Â  .then(response => {
Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  throw new Error(`Erreur de rÃ©seau ou fichier ${RECIPE_FILE} introuvable (Code: ${response.status}).`);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  return response.json();
Â  Â  Â  Â  })
Â  Â  Â  Â  .then(data => {
Â  Â  Â  Â  Â  document.getElementById('loading').style.display = 'none';
Â  Â  Â  Â  Â  processData(data); // Appeler la fonction de traitement robuste
Â  Â  Â  Â  })
Â  Â  Â  Â  .catch(error => {
Â  Â  Â  Â  Â  console.error('Erreur de chargement ou de traitement:', error);
Â  Â  Â  Â  Â  document.getElementById('loading').style.display = 'none';
Â  Â  Â  Â  Â  document.getElementById('error-message').style.display = 'block';
Â  Â  Â  Â  Â  document.getElementById('error-text').textContent = `Erreur: ${error.message}`;
Â  Â  Â  Â  });
Â  Â  });

Â  Â  // Afficher catÃ©gories (Niveau 1)
Â  Â  function showCategories() {
Â  Â  Â  catContainer.style.display = "flex";
Â  Â  Â  recContainer.style.display = "none";
Â  Â  Â  recipeDiv.style.display = "none";
Â  Â  Â  catContainer.innerHTML = "";
Â  Â  Â Â 
Â  Â  Â  categoryKeys.forEach((categoryName, index) => {
Â  Â  Â  Â  const recipeCount = groupedRecipes[categoryName].length;
Â  Â  Â  Â Â 
Â  Â  Â  Â  let imageUrl = `https://via.placeholder.com/400x200?text=${encodeURIComponent(categoryName)}`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Images personnalisÃ©es (si les fichiers sont prÃ©sents dans le dossier)
Â  Â  Â  Â  if (categoryName.includes("Desserts")) {
Â  Â  Â  Â  Â  imageUrl = "dessertsalle.png"; 
Â  Â  Â  Â  } else if (categoryName.includes("Soupes")) {
Â  Â  Â  Â  Â  imageUrl = "soupe.png"; 
Â  Â  Â  Â  }

Â  Â  Â  Â  catContainer.innerHTML += `
Â  Â  Â  Â  Â  <div class="col">
Â  Â  Â  Â  Â  Â  <div class="card h-100 shadow-sm">
Â  Â  Â  Â  Â  Â  Â  <img src="${imageUrl}" class="card-img-top" alt="Image pour ${categoryName}">
Â  Â  Â  Â  Â  Â  Â  <div class="card-body text-center">
Â  Â  Â  Â  Â  Â  Â  Â  <h5 class="card-title">${categoryName}</h5>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-muted">${recipeCount} recette${recipeCount > 1 ? 's' : ''}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-brown" onclick="showRecipes('${categoryName}')">Voir les recettes</button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  });
Â  Â  }

Â  Â  // Afficher recettes d'un thÃ¨me (Niveau 2)
Â  Â  function showRecipes(categoryName) {
Â  Â  Â  const recipes = groupedRecipes[categoryName];

Â  Â  Â  catContainer.style.display = "none";
Â  Â  Â  recipeDiv.style.display = "none";
Â  Â  Â  recContainer.style.display = "block";
Â  Â  Â  recContainer.innerHTML = `<h3 class="mt-3 text-center">${categoryName}</h3><div class="row row-cols-1 row-cols-md-2 g-4">`;
Â  Â  Â Â 
Â  Â  Â  recipes.forEach((r, i) => {
Â  Â  Â  Â  // Note : Le titre de la recette est r.title
Â  Â  Â  Â  recContainer.innerHTML += `
Â  Â  Â  Â  Â  <div class="col">
Â  Â  Â  Â  Â  Â  <div class="card h-100 shadow-sm">
Â  Â  Â  Â  Â  Â  Â  <img src="https://via.placeholder.com/300x160?text=${encodeURIComponent(r.title)}" alt="${r.title}" class="card-img-top">
Â  Â  Â  Â  Â  Â  Â  <div class="card-body">
Â  Â  Â  Â  Â  Â  Â  Â  <h5 class="card-title">${r.title}</h5>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-brown" onclick="showRecipe('${categoryName}', ${i})">Voir les dÃ©tails</button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  recContainer.innerHTML += `</div><div class="back-button"><button class="btn btn-brown" onclick="showCategories()">Retour aux catÃ©gories</button></div>`;
Â  Â  }

Â  Â  // Afficher dÃ©tail recette (Niveau 3)
Â  Â  function showRecipe(categoryName, recipeIndex) {
Â  Â  Â  const recipes = groupedRecipes[categoryName];
Â  Â  Â  const r = recipes[recipeIndex];
Â  Â  Â Â 
Â  Â  Â  recContainer.style.display = "none";
Â  Â  Â  recipeDiv.style.display = "block";
Â  Â  Â Â 
Â  Â  Â  // Formatage des ingrÃ©dients en liste (compatible avec les tableaux)
Â  Â  Â  let ingredientsHTML = '<h4>IngrÃ©dients</h4>';
Â  Â  Â  if (Array.isArray(r.ingredients)) {
Â  Â  Â  Â  ingredientsHTML += `<ul>${r.ingredients.map(ing => `<li>${ing}</li>`).join('')}</ul>`;
Â  Â  Â  } else if (r.ingredients) {
Â  Â  Â  Â  ingredientsHTML += `<p>${r.ingredients}</p>`;
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  // Formatage de la prÃ©paration (compatible avec les tableaux ou les chaÃ®nes de caractÃ¨res)
Â  Â  Â  let preparationText = "PrÃ©paration non spÃ©cifiÃ©e.";
Â  Â  Â  if (Array.isArray(r.preparation)) {
Â  Â  Â  Â  // Si c'est un tableau, on utilise des numÃ©ros d'Ã©tapes (plus lisible)
Â  Â  Â  Â  preparationText = `<ol>${r.preparation.map(step => `<li>${step}</li>`).join('')}</ol>`;
Â  Â  Â  } else if (r.preparation) {
Â  Â  Â  Â  // Si c'est une chaÃ®ne de caractÃ¨res, on l'affiche directement
Â  Â  Â  Â  preparationText = `<p>${r.preparation}</p>`;
Â  Â  Â  }

Â  Â  Â  recipeDiv.innerHTML = `
Â  Â  Â  Â  <div class="card p-4">
Â  Â  Â  Â  Â  <div class="card-body">
Â  Â  Â  Â  Â  Â  <h3>${r.title}</h3>
Â  Â  Â  Â  Â  Â  <p class="text-muted"><strong>CatÃ©gorie:</strong> ${categoryName}</p>
Â  Â  Â  Â  Â  Â  ${ingredientsHTML}
Â  Â  Â  Â  Â  Â  <h4>PrÃ©paration</h4>
Â  Â  Â  Â  Â  Â  ${preparationText}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="back-button">
Â  Â  Â  Â  Â  <button class="btn btn-brown" onclick="showRecipes('${categoryName}')">Retour aux recettes</button>
Â  Â  Â  Â  Â  <button class="btn btn-brown" onclick="showCategories()">Retour aux catÃ©gories</button>
Â  Â  Â  Â  </div>
Â  Â  Â  `;
Â  Â  }
Â  </script>
</body>
</html>
